<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VIG Climate-Risk Map</title>

  <!-- Leaflet -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Overlay styling -->
  <link rel="stylesheet"
        href="{{ url_for('static', filename='overlay.css') }}" />

  <!-- General style -->
  <link rel="stylesheet"
        href="{{ url_for('static', filename='style.css') }}" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <!-- MAP (full-screen) -->
  <div id="map"></div>

  <!-- LOGO  (top-right, z-stacked above map) -->
  <img id="logo"
       src="{{ url_for('static', filename='logo.png') }}"
       alt="VIG logo"
       class="overlay logo"
       onclick="location.href='https://ixlabs.ie.edu/'"
   />

  <!-- BREADCRUMB (top-centre)  -->
  <div id="breadcrumb" class="overlay breadcrumb"></div>

  <!-- INFO BADGE (bottom-left) -->
  <div id="infoToggle" class="overlay info-badge">i</div>

  <!-- INFO PANEL  (initially hidden) -->
  <div id="infoPanel" class="overlay info-panel"></div>

  <!-- CONTROLS (top-left) -->
  <div id="controls" class="overlay">
    <label for="yearSlider">Year: <span id="yearValue" class="mutableValue">2025</span></label>
    <input id="yearSlider" class="slider" type="range"
           min="{{ min_year }}" max="{{ max_year }}"
           value="{{ yearValue }}" />
    <br />

    <label for="weekSlider">Week: <span id="weekValue" class="mutableValue">1</span></label>
    <input id="weekSlider" class="slider" type="range"
           min="1" max="52" value="1" />
    <br />

    <label for="metricSelect">Dataset: </label>
    <select id="metricSelect" class="select">
      <option value="mortality_rate">Mortality</option>
      <option value="population_density">Population Density</option>
      <option value="temperature_rcp45">Temp RCP 4.5</option>
      <option value="temperature_rcp85">Temp RCP 8.5</option>
    </select>
  </div>

  <!-- TIME-SERIES (bottom-right) -->
  <div id="graph" class="overlay rounded shadow"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Pass server vars -->
  <script>
    window.FLASK_CTX = {
      centerLat : parseFloat("{{ center_lat }}"),
      centerLon : parseFloat("{{ center_lon }}"),
      zoom      : parseInt("{{ zoom }}", 10),
      regionSlug: "{{ region }}",
      maxYear   : "{{ max_year }}",
    };
  </script>

  <!-- Your existing application logic -->
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
