<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VIG Climate-Risk Map</title>

  <!-- Leaflet -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Overlay styling -->
  <link rel="stylesheet"
        href="{{ url_for('static', filename='overlay.css') }}" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <!-- MAP (full-screen) -->
  <div id="map"></div>

  <!-- LOGO  (top-right, z-stacked above map) -->
  <img id="logo"
      src="{{ url_for('static', filename='logo.png') }}"
      alt="VIG logo"
      class="overlay logo"
      onclick="location.href='https://ixlabs.ie.edu/'"
  />

  <!-- INFO BADGE (bottom-left) -->
  <div id="infoToggle" class="overlay info-badge">i</div>

  <!-- INFO PANEL  (initially hidden) -->
  <div id="infoPanel" class="overlay info-panel">
    <h6 class="m-0 mb-1">Data Sources</h6>
    <ul class="m-0 ps-3 small">
      <li>EURO-CORDEX <code>tas</code></li>
      <li>Copernicus ERA5 re-analysis</li>
      <li>Eurostat <code>demomwk</code></li>
      <li>Eurostat EUROPOP 2023</li>
      <li>Copernicus CAMS AQ</li>
    </ul>
  </div>

  <!-- CONTROLS (top-left) -->
  <div id="controls" class="overlay">
    <label for="yearSlider">Year</label>
    <input id="yearSlider" type="range"
           min="{{ min_year }}" max="{{ max_year }}"
           value="2025" />
    <span id="yearLabel">2025</span>
    <br />

    <label for="weekSlider">Week</label>
    <input id="weekSlider" type="range"
           min="1" max="52" value="1" />
    <span id="weekLabel">1</span>
    <br />

    <label for="metricSelect">Dataset</label>
    <select id="metricSelect">
      <option value="mortality_rate">Mortality</option>
      <option value="population_density">Population Density</option>
      <option value="temperature_rcp45">Temp RCP 4.5</option>
      <option value="temperature_rcp85" selected>Temp RCP 8.5</option>
    </select>
  </div>

  <!-- TIME-SERIES (bottom-right) -->
  <div id="graph" class="overlay rounded shadow"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Pass server vars -->
  <script>
    window.FLASK_CTX = {
      centerLat : parseFloat("{{ center_lat }}"),
      centerLon : parseFloat("{{ center_lon }}"),
      zoom      : parseInt("{{ zoom }}", 10),
      regionSlug: "{{ region }}",
      maxYear   : "{{ max_year }}"
    };
  </script>

  <!-- Your existing application logic -->
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
