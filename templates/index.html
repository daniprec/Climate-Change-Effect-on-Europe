<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VIG Climate-Risk Map</title>

  <!-- Leaflet -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- General style -->
  <link rel="stylesheet"
        href="{{ url_for('static', filename='style.css') }}" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Zoom/Pan plug-in -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2"></script>
</head>
<body>
  <div id="app-wrapper">
    <!-- SIDEBAR (left column) -->
    <aside id="sidebar">
      <div id="controls" class="panel">
        <label for="yearSlider">Year: <span id="yearValue" class="mutableValue">2025</span></label>
        <input id="yearSlider" class="slider" type="range"
              min="{{ min_year }}" max="{{ max_year }}"
              value="{{ yearValue }}" />
        <br />

        <label for="weekSlider">Week: <span id="weekValue" class="mutableValue">1</span></label>
        <input id="weekSlider" class="slider" type="range"
              min="1" max="52" value="1" />
        <br />

        <label for="metricSelect">Dataset: </label>
        <select id="metricSelect" class="select">
          <option value="mortality_rate">Mortality</option>
          <option value="population_density">Population Density</option>
          <option value="temperature_rcp45">Temp RCP 4.5</option>
          <option value="temperature_rcp85">Temp RCP 8.5</option>
        </select>
      </div>

      <div id="infoPanel" class="panel">
        <!-- info panel -->
      </div>

      <div id="regionInfo" class="panel">
        <!-- region popup -->
      </div>

      <div id="regionGraph" class="panel">
        <!-- time series -->
      </div>
    </aside>

    <!-- SPLITTER (between sidebar and map) -->
    <div id="splitter"></div>

    <!-- MAP (right column) -->
    <div id="map">
      <!-- BREADCRUMB (at the center of the map)  -->
      <div id="breadcrumb" class="overlay breadcrumb"></div>
    </div>
    <!-- LOGO  (top-right, z-stacked above map) -->
    <img id="logo"
      src="{{ url_for('static', filename='logo.png') }}"
      alt="VIG logo"
      class="overlay logo"
      onclick="location.href='https://ixlabs.ie.edu/'"
    />
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Pass server vars -->
  <script>
    window.FLASK_CTX = {
      centerLat : parseFloat("{{ center_lat }}"),
      centerLon : parseFloat("{{ center_lon }}"),
      zoom      : parseInt("{{ zoom }}", 10),
      nutsID: "{{ nuts_id }}",
      maxYear   : "{{ max_year }}",
      availableIDs: "{{ ls_ids }}",
    };
  </script>

  <!-- Application logic -->
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
